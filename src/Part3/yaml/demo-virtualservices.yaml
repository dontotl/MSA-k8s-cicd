metadata:
  name: demo-virtualservice
spec:
  hosts:
  - "*"
  gateways:
  - demo-gateway
  http:
  - match:
    - uri:
        prefix: /v1/user
    route:
    - destination:
        host: users-service
        port:
          number: 5000
  - match:
    - uri:
        prefix: /v1/movies
    route:
    - destination:
        host: movies-service
        port:
          number: 5000
  - match:
    - uri:
        prefix: /v1/manage
    route:
    - destination:
        host: manage-service
        subset : base
        port:
          number: 3000
      weight: 80
    - destination:
        host: manage-service
        subset : canary
        port:
          number: 3000
      weight: 20
